{"id":"node_modules/popmotion/animations/tween/index.js","dependencies":[{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js.map","includedInParent":true,"mtime":1525955812000},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/src/animations/tween/index.ts","includedInParent":true,"mtime":1521009635000},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/package.json","includedInParent":true,"mtime":1611669448384},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/package.json","includedInParent":true,"mtime":1611669448356},{"name":"framesync","loc":{"line":3,"column":26},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/framesync/dist/framesync.es.js"},{"name":"../../action","loc":{"line":4,"column":23},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/action/index.js"},{"name":"../../calc","loc":{"line":5,"column":21},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/calc.js"},{"name":"../../easing","loc":{"line":6,"column":23},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/easing.js"},{"name":"../../transformers","loc":{"line":7,"column":29},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/transformers.js"},{"name":"../every-frame","loc":{"line":8,"column":28},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/every-frame/index.js"},{"name":"./scrubber","loc":{"line":9,"column":25},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/index.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/animations/tween/scrubber.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar framesync_1 = require(\"framesync\");\nvar action_1 = require(\"../../action\");\nvar calc_1 = require(\"../../calc\");\nvar easing_1 = require(\"../../easing\");\nvar transformers_1 = require(\"../../transformers\");\nvar every_frame_1 = require(\"../every-frame\");\nvar scrubber_1 = require(\"./scrubber\");\nvar clampProgress = transformers_1.clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) { props = {}; }\n    return action_1.default(function (_a) {\n        var update = _a.update, complete = _a.complete;\n        var _b = props.duration, duration = _b === void 0 ? 300 : _b, _c = props.ease, ease = _c === void 0 ? easing_1.easeOut : _c, _d = props.flip, flip = _d === void 0 ? 0 : _d, _e = props.loop, loop = _e === void 0 ? 0 : _e, _f = props.yoyo, yoyo = _f === void 0 ? 0 : _f;\n        var _g = props.from, from = _g === void 0 ? 0 : _g, _h = props.to, to = _h === void 0 ? 1 : _h, _j = props.elapsed, elapsed = _j === void 0 ? 0 : _j, _k = props.playDirection, playDirection = _k === void 0 ? 1 : _k, _l = props.flipCount, flipCount = _l === void 0 ? 0 : _l, _m = props.yoyoCount, yoyoCount = _m === void 0 ? 0 : _m, _o = props.loopCount, loopCount = _o === void 0 ? 0 : _o;\n        var playhead = scrubber_1.default({ from: from, to: to, ease: ease }).start(update);\n        var progress = 0;\n        var tweenTimer;\n        var isActive = false;\n        var reverseTween = function () { return playDirection *= -1; };\n        var isTweenComplete = function () {\n            var isComplete = (playDirection === 1)\n                ? isActive && elapsed >= duration\n                : isActive && elapsed <= 0;\n            if (!isComplete)\n                return false;\n            if (isComplete && !loop && !flip && !yoyo)\n                return true;\n            var isStepTaken = false;\n            if (loop && loopCount < loop) {\n                elapsed = 0;\n                loopCount++;\n                isStepTaken = true;\n            }\n            else if (flip && flipCount < flip) {\n                elapsed = duration - elapsed;\n                _a = [to, from], from = _a[0], to = _a[1];\n                playhead = scrubber_1.default({ from: from, to: to, ease: ease }).start(update);\n                flipCount++;\n                isStepTaken = true;\n            }\n            else if (yoyo && yoyoCount < yoyo) {\n                reverseTween();\n                yoyoCount++;\n                isStepTaken = true;\n            }\n            return !isStepTaken;\n            var _a;\n        };\n        var updateTween = function () {\n            progress = clampProgress(calc_1.getProgressFromValue(0, duration, elapsed));\n            playhead.seek(progress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            tweenTimer = every_frame_1.default().start(function () {\n                elapsed += framesync_1.timeSinceLastFrame() * playDirection;\n                updateTween();\n                if (isTweenComplete() && complete) {\n                    tweenTimer.stop();\n                    framesync_1.onFrameUpdate(complete, true);\n                }\n            });\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (tweenTimer)\n                tweenTimer.stop();\n        };\n        startTimer();\n        return {\n            isActive: function () { return isActive; },\n            getElapsed: function () { return transformers_1.clamp(0, duration)(elapsed); },\n            getProgress: function () { return progress; },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = calc_1.getValueFromProgress(0, duration, newProgress);\n                framesync_1.onFrameUpdate(updateTween, true);\n                return this;\n            },\n            reverse: function () {\n                reverseTween();\n                return this;\n            }\n        };\n    });\n};\nexports.default = tween;\n"},"sourceMaps":{"js":{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/animations/tween/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { onFrameUpdate, timeSinceLastFrame } from 'framesync';\nimport action, { Action } from '../../action';\nimport { ColdSubscription } from '../../action/types';\nimport { getProgressFromValue, getValueFromProgress } from '../../calc';\nimport { easeOut } from '../../easing';\nimport { IObserver } from '../../observer/types';\nimport { clamp } from '../../transformers';\nimport onFrame from '../every-frame';\nimport scrubber from './scrubber';\nimport { TweenInterface, TweenProps } from './types';\n\nconst clampProgress = clamp(0, 1);\n\nconst tween = (props: TweenProps = {}): Action => action(({ update, complete }: IObserver): TweenInterface => {\n  const {\n    duration = 300,\n    ease = easeOut,\n    flip = 0,\n    loop = 0,\n    yoyo = 0\n  } = props;\n  let {\n    from = 0,\n    to = 1,\n    elapsed = 0,\n    playDirection = 1,\n    flipCount = 0,\n    yoyoCount = 0,\n    loopCount = 0\n  } = props;\n\n  let playhead = scrubber({ from, to, ease }).start(update);\n\n  let progress = 0;\n  let tweenTimer: ColdSubscription;\n  let isActive = false;\n  const reverseTween = () => playDirection *= -1;\n\n  const isTweenComplete = (): boolean => {\n    const isComplete = (playDirection === 1)\n      ? isActive && elapsed >= duration\n      : isActive && elapsed <= 0;\n\n    if (!isComplete) return false;\n    if (isComplete && !loop && !flip && !yoyo) return true;\n\n    let isStepTaken = false;\n    if (loop && loopCount < loop) {\n      elapsed = 0;\n      loopCount++;\n      isStepTaken = true;\n\n    } else if (flip && flipCount < flip) {\n      elapsed = duration - elapsed;\n\n      [from, to] = [to, from];\n      playhead = scrubber({ from, to, ease }).start(update);\n\n      flipCount++;\n      isStepTaken = true;\n\n    } else if (yoyo && yoyoCount < yoyo) {\n      reverseTween();\n      yoyoCount++;\n      isStepTaken = true;\n    }\n\n    return !isStepTaken;\n  };\n\n  const updateTween = () => {\n    progress = clampProgress(getProgressFromValue(0, duration, elapsed));\n    playhead.seek(progress);\n  };\n\n  const startTimer = () => {\n    isActive = true;\n    tweenTimer = onFrame().start(() => {\n      elapsed += timeSinceLastFrame() * playDirection;\n      updateTween();\n      if (isTweenComplete() && complete) {\n        tweenTimer.stop();\n        onFrameUpdate(complete, true);\n      }\n    });\n  };\n\n  const stopTimer = () => {\n    isActive = false;\n    if (tweenTimer) tweenTimer.stop();\n  };\n\n  startTimer();\n\n  return {\n    isActive: () => isActive,\n    getElapsed: () => clamp(0, duration)(elapsed),\n    getProgress: () => progress,\n    stop() {\n      stopTimer();\n    },\n    pause() {\n      stopTimer();\n      return this;\n    },\n    resume() {\n      startTimer();\n      return this;\n    },\n    seek(newProgress: number) {\n      elapsed = getValueFromProgress(0, duration, newProgress);\n      onFrameUpdate(updateTween, true);\n      return this;\n    },\n    reverse() {\n      reverseTween();\n      return this;\n    }\n  };\n});\n\nexport default tween;\n"]}},"error":null,"hash":"3744c25b4c12d5a9fcc6282ce7cd5129","cacheData":{"env":{}}}