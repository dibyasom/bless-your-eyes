{"id":"node_modules/popmotion/compositors/multi.js","dependencies":[{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/compositors/multi.js.map","includedInParent":true,"mtime":1525955812000},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/src/compositors/multi.ts","includedInParent":true,"mtime":1525955684000},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/package.json","includedInParent":true,"mtime":1611669448384},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/package.json","includedInParent":true,"mtime":1611669448356},{"name":"framesync","loc":{"line":3,"column":26},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/compositors/multi.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/framesync/dist/framesync.es.js"},{"name":"../action","loc":{"line":4,"column":23},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/compositors/multi.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/action/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar framesync_1 = require(\"framesync\");\nvar action_1 = require(\"../action\");\nvar multi = function (_a) {\n    var getCount = _a.getCount, getFirst = _a.getFirst, getOutput = _a.getOutput, mapApi = _a.mapApi, setProp = _a.setProp, startActions = _a.startActions;\n    return function (actions) {\n        return action_1.default(function (_a) {\n            var update = _a.update, complete = _a.complete, error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () { return update(output); };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions)\n                                framesync_1.onFrameUpdate(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        framesync_1.onFrameUpdate(updateOutput, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\nexports.default = multi;\n"},"sourceMaps":{"js":{"version":3,"file":"multi.js","sourceRoot":"","sources":["../src/compositors/multi.ts"],"names":[],"mappings":";;AAAA,uCAA0C;AAC1C,oCAA2C;AAc3C,IAAM,KAAK,GAAG,UAAa,EAOF;QANvB,sBAAQ,EACR,sBAAQ,EACR,wBAAS,EACT,kBAAM,EACN,oBAAO,EACP,8BAAY;IACgB,OAAA,UAAC,OAAU;QACvC,OAAA,gBAAM,CAAC,UAAC,EAA2B;gBAAzB,kBAAM,EAAE,sBAAQ,EAAE,gBAAK;YAC/B,IAAM,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC;YACrC,IAAM,MAAM,GAAG,SAAS,EAAE,CAAC;YAC3B,IAAM,YAAY,GAAG,cAAM,OAAA,MAAM,CAAC,MAAM,CAAC,EAAd,CAAc,CAAC;YAC1C,IAAI,mBAAmB,GAAG,CAAC,CAAC;YAE5B,IAAM,IAAI,GAAG,YAAY,CAAC,OAAO,EAAE,UAAC,CAAC,EAAE,IAAI;gBACzC,IAAI,YAAY,GAAG,KAAK,CAAC;gBACzB,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC;oBACb,QAAQ,EAAE;wBACR,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;4BAClB,YAAY,GAAG,IAAI,CAAC;4BACpB,mBAAmB,EAAE,CAAC;4BACtB,EAAE,CAAC,CAAC,mBAAmB,KAAK,UAAU,CAAC;gCAAC,yBAAa,CAAC,QAAQ,CAAC,CAAC;wBAClE,CAAC;oBACH,CAAC;oBACD,KAAK,OAAA;oBACL,MAAM,EAAE,UAAC,CAAM;wBACb,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;wBACzB,yBAAa,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;oBACpC,CAAC;iBACF,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YAEH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CACvC,UAAC,GAAgC,EAAE,UAAU;gBAC3C,GAAG,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;gBAC3C,MAAM,CAAC,GAAG,CAAC;YACb,CAAC,EACD,EAAE,CACH,CAAC;QACJ,CAAC,CAAC;IA/BF,CA+BE;AAhC0B,CAgC1B,CAAC;AAEL,kBAAe,KAAK,CAAC","sourcesContent":["import { onFrameUpdate } from \"framesync\";\nimport action, { Action } from \"../action\";\nimport { ColdSubscription } from \"../action/types\";\n\nexport type ActionStarter<I> = (action: Action, key: I) => ColdSubscription;\n\nexport type MultiProps<A, T, V, I> = {\n  getCount: (actions: A) => number;\n  getFirst: (subs: T) => ColdSubscription;\n  getOutput: () => V;\n  mapApi: (subs: T, methodName: string) => (...args: any[]) => V;\n  setProp: (output: V, name: I, value: any) => any;\n  startActions: (actions: A, starter: ActionStarter<I>) => T;\n};\n\nconst multi = <A, T, V, I>({\n  getCount,\n  getFirst,\n  getOutput,\n  mapApi,\n  setProp,\n  startActions\n}: MultiProps<A, T, V, I>) => (actions: A): Action =>\n  action(({ update, complete, error }) => {\n    const numActions = getCount(actions);\n    const output = getOutput();\n    const updateOutput = () => update(output);\n    let numCompletedActions = 0;\n\n    const subs = startActions(actions, (a, name) => {\n      let hasCompleted = false;\n      return a.start({\n        complete: () => {\n          if (!hasCompleted) {\n            hasCompleted = true;\n            numCompletedActions++;\n            if (numCompletedActions === numActions) onFrameUpdate(complete);\n          }\n        },\n        error,\n        update: (v: any) => {\n          setProp(output, name, v);\n          onFrameUpdate(updateOutput, true);\n        }\n      });\n    });\n\n    return Object.keys(getFirst(subs)).reduce(\n      (api: { [key: string]: Function }, methodName) => {\n        api[methodName] = mapApi(subs, methodName);\n        return api;\n      },\n      {}\n    );\n  });\n\nexport default multi;\n"]}},"error":null,"hash":"84e949ad30f77db146c7785044803e3b","cacheData":{"env":{}}}