{"id":"node_modules/popmotion/action/vector.js","dependencies":[{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/action/vector.js.map","includedInParent":true,"mtime":1525955812000},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/src/action/vector.ts","includedInParent":true,"mtime":1513028457000},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/package.json","includedInParent":true,"mtime":1611669448384},{"name":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/package.json","includedInParent":true,"mtime":1611669448356},{"name":"style-value-types","loc":{"line":11,"column":34},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/action/vector.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/style-value-types/dist/style-value-types.es.js"},{"name":"../compositors/composite","loc":{"line":12,"column":26},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/action/vector.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/compositors/composite.js"},{"name":"../compositors/parallel","loc":{"line":13,"column":25},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/action/vector.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/compositors/parallel.js"},{"name":"../transformers","loc":{"line":14,"column":29},"parent":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/action/vector.js","resolved":"/home/divyu/Documents/GitHub/bless-your-eyes/node_modules/popmotion/transformers.js"}],"generated":{"js":"\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar style_value_types_1 = require(\"style-value-types\");\nvar composite_1 = require(\"../compositors/composite\");\nvar parallel_1 = require(\"../compositors/parallel\");\nvar transformers_1 = require(\"../transformers\");\nvar isColor = style_value_types_1.color.test;\nvar convertToColorAction = function (init, props) { return (typeof props.from === 'string' && isColor(props.from) &&\n    typeof props.to === 'string' && isColor(props.to)) ? init(__assign({}, props, { from: 0, to: 1 })).pipe(transformers_1.blendColor(props.from, props.to), style_value_types_1.color.transform)\n    : init(props); };\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    return {\n        getVectorKeys: function (props) { return testNames.reduce(function (vectorKeys, key) {\n            if (props[key] !== undefined && !typeTests[key](props[key])) {\n                vectorKeys.push(key);\n            }\n            return vectorKeys;\n        }, []); },\n        test: function (props) { return props && testNames.reduce(function (isVector, key) {\n            return isVector || (props[key] !== undefined && !typeTests[key](props[key]));\n        }, false); }\n    };\n};\nvar reduceArrayValue = function (i) { return function (props, key) {\n    props[key] = props[key][i];\n    return props;\n}; };\nvar createArrayVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        return convertToColorAction(init, vectorKeys.reduce(reduceArrayValue(i), __assign({}, props)));\n    });\n    return parallel_1.default.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) { return function (props, propKey) {\n    props[propKey] = props[propKey][key];\n    return props;\n}; };\nvar createObjectVector = function (init, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        map[key] = convertToColorAction(init, vectorKeys.reduce(reduceObjectValue(key), __assign({}, props)));\n        return map;\n    }, {});\n    return composite_1.default(actionMap);\n};\nvar createColorVector = function (init, props) { return convertToColorAction(init, props); };\nvar vectorAction = function (init, typeTests) {\n    var _a = createVectorTests(typeTests), test = _a.test, getVectorKeys = _a.getVectorKeys;\n    return function (props) {\n        var isVector = test(props);\n        if (!isVector)\n            return init(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        if (Array.isArray(testProp)) {\n            return createArrayVector(init, props, vectorKeys);\n        }\n        else if (typeof testProp === 'string' && isColor(testProp)) {\n            return createColorVector(init, props, vectorKeys);\n        }\n        else {\n            return createObjectVector(init, props, vectorKeys);\n        }\n    };\n};\nexports.default = vectorAction;\n"},"sourceMaps":{"js":{"version":3,"file":"vector.js","sourceRoot":"","sources":["../src/action/vector.ts"],"names":[],"mappings":"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","sourcesContent":["import { color } from 'style-value-types';\nimport composite from '../compositors/composite';\nimport parallel from '../compositors/parallel';\nimport { blendColor } from '../transformers';\nimport { Action } from './';\n\n// TODO: Clean this shit up\n\nconst isColor = color.test;\n\nexport type Props = {\n  [key: string]: any\n};\n\nexport type ActionFactory = (props: Props) => Action;\n\nexport type TypeTest = (v: any) => boolean;\nexport type TypeTestMap = { [key: string]: TypeTest };\nexport type ActionMap = { [key: string]: Action };\n\nexport type VectorActionFactory = (\n  init: ActionFactory,\n  typeTests: TypeTestMap\n) => (props: Props) => Action;\n\ntype VectorTestFactory = (typeTests: TypeTestMap) => {\n  getVectorKeys: (props: Props) => string[];\n  test: (props: Props) => boolean;\n};\n\ntype CreateVectorAction = (init: ActionFactory, props: Props, vectorKeys: string[]) => Action;\n\nconst convertToColorAction = (init: ActionFactory, props: Props) => (\n  typeof props.from === 'string' && isColor(props.from) &&\n  typeof props.to === 'string' && isColor(props.to)\n) ? init({\n    ...props,\n    from: 0,\n    to: 1\n  }).pipe(\n    blendColor(props.from, props.to),\n    color.transform\n  )\n  : init(props);\n\nconst createVectorTests: VectorTestFactory = (typeTests) => {\n  const testNames = Object.keys(typeTests);\n\n  return {\n    getVectorKeys: (props: Props) => testNames.reduce((vectorKeys: string[], key: string) => {\n      if (props[key] !== undefined && !typeTests[key](props[key])) {\n        vectorKeys.push(key);\n      }\n      return vectorKeys;\n    }, []),\n    test: (props: Props) => props && testNames.reduce((isVector, key) => {\n      return isVector || (props[key] !== undefined && !typeTests[key](props[key]));\n    }, false)\n  };\n};\n\nconst reduceArrayValue = (i: number) => (props: Props, key: string) => {\n  // Note: Type coercion makes this inefficient\n  props[key] = props[key][i];\n  return props;\n};\n\nconst createArrayVector: CreateVectorAction = (init, props, vectorKeys) => {\n  const [ firstVectorKey ] = vectorKeys;\n  const actionList: Action[] = props[firstVectorKey].map((v: any, i: number) => {\n    return convertToColorAction(init, vectorKeys.reduce(reduceArrayValue(i), { ...props }));\n  });\n\n  return parallel(...actionList);\n};\n\nconst reduceObjectValue = (key: string) => (props: Props, propKey: string) => {\n  // Note: Type coercion makes this inefficient\n  props[propKey] = props[propKey][key];\n  return props;\n};\n\nconst createObjectVector: CreateVectorAction = (init, props, vectorKeys) => {\n  const [ firstVectorKey ] = vectorKeys;\n  const actionMap: ActionMap = Object.keys(props[firstVectorKey]).reduce((map: ActionMap, key) => {\n    map[key] = convertToColorAction(init, vectorKeys.reduce(reduceObjectValue(key), { ...props }));\n    return map;\n  }, {});\n\n  return composite(actionMap);\n};\n\nconst createColorVector: CreateVectorAction = (init, props) => convertToColorAction(init, props);\n\nconst vectorAction: VectorActionFactory = (init, typeTests) => {\n  const { test, getVectorKeys } = createVectorTests(typeTests);\n\n  return (props) => {\n    const isVector = test(props);\n    if (!isVector) return init(props);\n\n    const vectorKeys = getVectorKeys(props);\n    const [ testKey ] = vectorKeys;\n    const testProp = props[testKey];\n\n    if (Array.isArray(testProp)) {\n      return createArrayVector(init, props, vectorKeys);\n    } else if (typeof testProp === 'string' && isColor(testProp)) {\n      return createColorVector(init, props, vectorKeys);\n    } else {\n      return createObjectVector(init, props, vectorKeys);\n    }\n  };\n};\n\nexport default vectorAction;\n"]}},"error":null,"hash":"bea952bff56124ccb5ef082d9cf87dbb","cacheData":{"env":{}}}